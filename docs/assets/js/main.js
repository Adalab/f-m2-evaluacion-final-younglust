"use strict";const input=document.querySelector(".main__input"),btn=document.querySelector(".main__button");let listSeries=document.querySelector(".main__list");const imgDefault="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let newArraySeries=[];const favorite=document.querySelector(".list-favorits");function selectItem(e){const t=e.currentTarget;t.classList.add("selected--series");const n=t.innerText,s=t.firstElementChild,i=t.id,r=s.cloneNode();if(newArraySeries.push({name:n,showImg:r,showId:i}),t.classList.contains("selected--series")){favorite.innerHTML="";const e=document.createElement("h3"),t=document.createTextNode("Mis series favoritas");e.classList.add("main__favorites"),e.appendChild(t),favorite.appendChild(e);for(let e=0;e<newArraySeries.length;e++){let t=document.createElement("li");t.classList.add("myFav"),favorite.append(t),t.setAttribute("id",newArraySeries[e].showId),t.append(newArraySeries[e].showImg,newArraySeries[e].name),localStorage.setItem("myShow",JSON.stringify(newArraySeries));JSON.parse(localStorage.getItem("myShow"));t.addEventListener("click",deleteFav)}}}function deleteFav(e){const t=e.currentTarget;let n=document.querySelectorAll(".main__li");for(let e=0;e<n.length;e++)t.id===n[e].id&&(n[e].classList.remove("selected--series"),t.remove())}function callButton(){const e=input.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(function(e){return e.json()}).then(function(e){const t=e;let n=0;listSeries.innerHTML="";for(let e=0;e<t.length;e++){const s=t[e].show,i=s.name;let r=s.image,a=document.createElement("li");const c=document.createElement("h2"),l=document.createElement("img");n++,a.setAttribute("id",`show${n}`),a.classList.add("main__li"),c.classList.add("main__second-title"),l.classList.add("main__img"),listSeries.appendChild(a),a.append(l,c),l.src=imgDefault,l.src=null==r?imgDefault:s.image.medium,c.innerText=i,a.addEventListener("click",selectItem)}})}btn.addEventListener("click",callButton);